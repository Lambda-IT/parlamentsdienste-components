<!DOCTYPE html>
<html dir="ltr" lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0" />
        <title>Stencil Component Starter</title>

        <script type="module" src="/build/parlamentsdienstecore.esm.js"></script>
        <script nomodule src="/build/parlamentsdienstecore.js"></script>
        <link href="./styles/typography.css" rel="stylesheet" />
        <link href="./build/parlamentsdienstecore.css" rel="stylesheet" />
        <style>
            body {
                background-color: #003840;
            }

            .example-components > * {
                margin: 10px;
                margin-top: 0;
            }

            .example-components:first-child {
                margin-top: 10px;
            }

            details {
                border-radius: 6px;
                background: #ccc;
                padding: 10px;
                box-shadow: 0 0.1rem 1rem -0.5rem rgba(0, 0, 0, 0.4);
            }

            details details {
                background: #f5f5f5;
                padding: 10px;
                box-shadow: 0 0.1rem 1rem -0.5rem rgba(0, 0, 0, 0.4);
            }

            details > * {
                margin: 20px 10px;
            }

            summary {
                margin: 0;
                padding: 3 px 6 px;
                font-size: 18px;
            }

            .checked .a {
                fill: green !important;
            }

            pd-list-item-expandable {
                --pd-list-item-background: #fff;
                margin-bottom: 6px;
            }
        </style>
    </head>
    <body>
        <div class="example-components">

            <details open>
                <summary>Table</summary>
                <details open>
                    <summary>Table</summary>
                    <pd-button id="pd-button-table">Change</pd-button>
                    <pd-button id="pd-button-table-refresh">Refresh</pd-button>
                    <pd-table id="pd-table-0" header-style="dark" selectable show-status external-row-handling menu-label="Aktionen">
                        <pd-menu-item text="Drucken">
                            <pd-icon size="2" name="print"></pd-icon>
                        </pd-menu-item>
                    </pd-table>
                    <!-- <pd-table id="pd-table-1" header-style="light" selectable show-status> </pd-table>
                    <pd-table id="pd-table-2" header-style="gray" selectable show-status menu-label="Aktionen"> -->
                    <!-- <pd-menu-item text="Drucken">
                            <pd-icon size="2" name="print"></pd-icon>
                        </pd-menu-item>
                        <pd-menu-item text="Drucken">
                            <pd-icon size="2" name="print"></pd-icon>
                        </pd-menu-item>
                    </pd-table> -->
                </details>

        </div>
        <script>
            const pdTable0 = document.getElementById('pd-table-0');




            const words = [
                'Apfel',
                'Buch',
                'Computer',
                'Dach',
                'Elefant',
                'Fahrrad',
                'Garten',
                'Haus',
                'Igel',
                'Junge',
                'Kaffee',
                'Lampe',
                'Maus',
                'Nase',
                'Ohr',
                'Pflanze',
                'Qualle',
                'Regen',
                'Schuh',
                'Tasse',
                'Uhr',
                'Vogel',
                'Wasser',
                'Xylophon',
                'Yacht',
                'Ziege',
                'Adler',
                'Blume',
                'Cello',
                'Dose',
            ];

            const random = Math.floor(Math.random() * words.length);
            // console.log(random, words[random]);

            function createRandomItems(length) {
                let items = [];
                for (i = 0; i < length; i++) {
                    items.push({
                        no: i,
                        column2: `${words[Math.floor(Math.random() * words.length)]} ${
                            words[Math.floor(Math.random() * words.length)]
                        } ${words[Math.floor(Math.random() * words.length)]}`,
                        column1: `${words[Math.floor(Math.random() * words.length)]}`,
                            pdIconConfig: {
                            view: true,
                            delete: true,
                        },
                    });
                }
                return items;
            }



            function makeid(length) {
                let result = '';
                const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz ';
                const charactersLength = characters.length;
                let counter = 0;
                while (counter < length) {
                    result += characters.charAt(Math.floor(Math.random() * charactersLength));
                    counter += 1;
                }
                return result;
            }

            function makeFakeRespone(input, combobox) {
                setTimeout(() => {
                    let items = createRandomItems(10, true);
                    items.forEach((item) => {
                        item.label = `${input}${makeid(5)}`;
                    });
                    combobox.items = items;
                    // combobox.setOpen(true);
                }, 2000);
            }


            const rowsData = [
                {
                    no: 1,
                    column1: 'SiK/CPS-19-01',
                    column2: 'Mitteilungen',
                    pdIconConfig: {
                        view: true,
                        delete: true,
                    },
                    pdStatus: 'danger',
                },
                {
                    no: 2,
                    column1: 'SiK/CPS-19-34',
                    column2: 'Aktuelles as dem VBS, Information und Diskussion',
                    pdStatus: 'success',
                },
                {
                    no: 3,
                    column1: 'SiK/CPS-19-12',
                    column2: 'NKF, Evaluationsverfahren, Information und Diskussion',
                    pdStatus: 'success',
                },
                {
                    no: 4,
                    column1: 'SiK/CPS-19-65',
                    column2: 'Gesamtkonzeption Boden, Präsentation und Diskussion',
                    pdIconConfig: {
                        edit: false,
                        delete: true,
                    },
                    pdStatus: 'success',
                },
                {
                    no: 5,
                    column1: 'SiK/CPS-19-101',
                    column2: 'Politisches Controlling, Präsentation, Diskussion und Beschluss',
                },
                {
                    no: 6,
                    column1: '18.445',
                    column2: 'Pa.lv. Semadenbi. Fakultatives',
                },
                {
                    no: 7,
                    column1: 'WBK/CSEC-19-02',
                    column2: 'Referendum für die Unterstützung Olympischer Spiele durch den Bund',
                },
                {
                    no: 8,
                    column1: '19.040',
                    column2: 'Controlling, Präsentation, Diskussion und Beschluss',
                    pdStatus: 'warning',
                },
            ];

            const columns = [
                {
                    columnName: 'no',
                    label: '#',
                    width: 50,
                    bold: true,
                    fixed: true,
                    sortable: true,
                },
                {
                    columnName: 'column1',
                    label: 'Referenz',
                    width: 150,
                    textAlign: 'right',
                    filter: true,
                },
                {
                    columnName: 'column2',
                    label: 'Thema',
                    width: 0,
                    minWidth: 500,
                    sortable: true,
                    sortDir: 'asc',
                    textAlign: 'left',
                    filter: true,
                },
            ];

            const rows1 = [
                { no: 1, column1: 'Bell1', column2: 'Bell2', column3: 0.12 },
                { no: 15, column1: 'Bell4', column2: 'Bell0', column3: 4563, pdStatus: 'warning', pdSelected: true },
            ];

            const pdButtonTable = document.getElementById('pd-button-table');
            const pdButtonTableRef = document.getElementById('pd-button-table-refresh');

            pdButtonTable.addEventListener('click', () => {
                pdTable0.rows = createRandomItems(56);
                // setTimeout(() => {
                //     console.log('pdTable0.selectedStatus', pdTable0.selectedStatus);
                //     pdTable0.selectedStatus = 'all';
                // }, 500);
                // setTimeout(() => {
                //     console.log('pdTable0.selectedStatus', pdTable0.selectedStatus);
                //     pdTable0.selectedStatus = 'indeterminate';
                // }, 1000);

                setTimeout(() => {
                    console.log('pdTable0.selectedStatus', pdTable0.selectedStatus);
                    pdTable0.selectedStatus = 'none';
                }, 1500);
                
            });

            pdButtonTableRef.addEventListener('click', () => {
                pdTable0.refresh();
            });

            pdTable0.columns = columns;
            pdTable0.rows = rowsData;
            pdTable0.showActionColumn = true;
            pdTable0.iconConfig = { edit: true, select: true, delete: true };
            pdTable0.paging = true;


            pdTable0.addEventListener('pd-selected', (e) => {
                pdTable0.selectedStatus = 'indeterminate';
                console.log('pd-selected', e.detail);
            });

            pdTable0.addEventListener('pd-filter-change', (e) => {
                console.log('pd-filter-change', e.detail);
            });
            pdTable0.addEventListener('pd-sort', (e) => {
                console.log('pd-sort', e.detail);
            });
            pdTable0.addEventListener('pd-edit', (e) => {
                console.log('pd-edit', e.detail);
            });





        </script>
    </body>
</html>
