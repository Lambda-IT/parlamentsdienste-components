import { Meta } from '@storybook/addon-docs/blocks';

<Meta title="Docs/React/React Project Setup" />

# Project Setup React

Node Version: 22<br />
React Version: 19

1. Build the parlamentsdienste components library

    ```bash
    git clone https://github.com/Lambda-IT/parlamentsdienste-components.git
    cd parlamentsdienste-components
    # if you dont have it already: npm i -g pnpm
    pnpm install
    pnpm run build:all
    pnpm run pack:all
    ```

    The pack:all command will generate .tgz files:

    - for the core library: `packages/core/parlamentsdienstecore-components-core-<version>.tgz`
    - for the angular wrapper library: `packages/angular/dist/parlamentsdienstecore-components-angular-<version>.tgz`
    - for the react wrapper library: `packages/react/dist/parlamentsdienstecore-components-react-<version>.tgz`
    - for the vue wrapper library: `packages/vue/dist/parlamentsdienstecore-components-vue-<version>.tgz`

2. Start a new react project using vite, next.js, nx...

3. Copy the core and the react wrapper .tgz files to your new react project folder and install them.
   Install the core library first.

    ```bash
    cd my-react-app
    npm install "parlamentsdienstecore-components-core-<version>.tgz" -f
    npm install "parlamentsdienstecore-components-react-<version>.tgz" -f
    ```

4. Make shure the assets from the core library are served as static assets. If you use vite, you can use the `vite-plugin-static-copy` plugin in your `vite.config.ts`:

    ```typescript
    import { defineConfig } from 'vite';
    import react from '@vitejs/plugin-react';
    import { viteStaticCopy } from 'vite-plugin-static-copy';

    export default defineConfig({
        plugins: [
            react(),
            viteStaticCopy({
                targets: [
                    {
                        src: 'node_modules/@parlamentsdienste-components/core/dist/parlamentsdienstecore/assets',
                        dest: '.',
                    },
                ],
            }),
        ],
    });
    ```

    or if you use next.js, you can copy the assets to the `public` folder with a postinstall script in your `package.json`:

    ```json
    "scripts": {
        "postinstall": "cp -R node_modules/@parlamentsdienste-components/core/dist/parlamentsdienstecore/assets public"
    }
    ```

    Don't forget to call this script after updating the library to ensure the assets are up-to-date.

5. To add the base styles and fonts add these two lines to the main entry file (e.g. `main.tsx` or `layout.tsx`):

    ```typescript
    import '@parlamentsdienste-components/core/styles/parlamentsdienstecore.css';
    import '@parlamentsdienste-components/core/styles/typography.css';
    ```

6. Call setAssetPath in your main entry file (e.g. `main.tsx` or `layout.tsx`) to set the asset path for the components:

    ```typescript
    import { setAssetPath } from '@parlamentsdienste-components/core/components';
    setAssetPath('http://localhost:5173');
    createRoot(document.getElementById('root')!).render(<App />);
    ```
